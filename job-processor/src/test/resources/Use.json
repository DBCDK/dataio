{"javascript":"LyoqIEBmaWxlIENvcmUgdXNlIGZ1bmN0aW9uYWxpdHkgKi8KLy8gV0FSTklORzogSWYgeW91IGJyZWFrIHRoaXMgZmlsZSwgdGhlIG1vZHVsZSBzeXN0ZW0gd2lsbCBzdG9wIHdvcmtpbmchCgovLyBUaGlzIGZpbGUgZGVmaW5lcyB0aGUgZnVuY3Rpb24gYHVzZShtb2R1bGUtbmFtZSwgdmVyc2lvbi1udW1iZXIpYCwKLy8gd2hpY2ggaXMgdXNlZCBmb3IgbG9hZGluZyBtb2R1bGVzLgovLyBUaGUgbW9kdWxlLW5hbWUgaXMgcmVzb2x2ZWQsIGFuZCB0aGUgbW9kdWxlIGlzIGxvYWRlZCwgCi8vIGlmIG5vdCBhbHJlYWR5IGF2YWlsYWJsZS4KLy8gVGhlIHZlcnNpb24tbnVtYmVyIGlzIG9wdGlvbmFsIGFuZCBpbmRpY2F0ZXMgd2hpY2ggdmVyc2lvbiBvZiAKLy8gdGhlIG1vZHVsZSB0aGF0IGlzIHJlcXVpcmVkLCBhbmQgdXNlZCB0byBjaGVjayBpZiB0aGUgbW9kdWxlCi8vIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY29kZS4KLy8KLy8gQSBtb2R1bGUgbXVzdCBkZWZpbmUgYSBnbG9iYWwgdmFyaWFibGUgYEVYUE9SVEVEX1NZTUJPTFNgCi8vIHdoaWNoIGxpc3RzIHRoZSBnbG9iYWwgdmFyaWFibGUgaXQgZXhwb3J0cy4KLy8gVGhlIG9wdGlvbmFsIGdsb2JhbCB2YXJpYWJsZSBgSUdOT1JFRF9TWU1CT0xTYCBjYW4gYmUgYWRkZWQsCi8vIHdoaWNoIHN1cHByZXNzZXMgd2FybmluZ3MgaWYgdGhvc2Ugc3ltYm9scyBhcmUgd3JpdHRlbiB0by4KLy8gSXQgYWxzbyBoYXMgdGhlIG9wdGlvbiBvZiBhZGRpbmcgYSB0aHJlZS1wYXJ0IHN0cmluZyB2ZXJzaW9uIG51bWJlcgovLyBhIGxhOiAiMS40LjU3IiBpbiBhIGBWRVJTSU9OYCB2YXJpYWJsZSB3aGljaCBjYW4gYmUgY2hlY2tlZCBmb3IuCi8vCi8vIEl0IGFsc28gZW5zdXJlcyB0aGF0IGEgZ2l2ZW4gbW9kdWxlIGlzIG9ubHkgbG9hZGVkIG9uY2UsCi8vIGFuZCBtYWtlcyBzb21lIGNoZWNrcyBvbiB2ZXJzaW9uIG51bWJlcnMgYW5kIHdoZXRoZXIKLy8gZ2xvYmFsIHZhcmlhYmxlcyBhcmUgd3JpdHRlbgovLwovLyBSZXNvbHV0aW9uIG9mIG1vZHVsZSBuYW1lIGlzIGN1cnJlbnRseSBkb25lIGluCi8vIHRoZSBuYXRpdmUgZW1iZWRkaW5nIGNvZGUuCi8vCi8vIGpzbGliIGRlcGVuZHMgb24sIGFuZCBsb2FkcyB0aGlzIG1vZHVsZS4KCnVzZSA9ICggZnVuY3Rpb24oICkgewoKICAgICAgICAvLyB0aGlzIG9iamVjdCBjb250YWlucyBhbGwgdmFyaWFibGVzIGV4cG9ydGVkIGZyb20gbW9kdWxlcwogICAgICAgIC8vIGFuZCBpcyBzdGF0aWMsIHZpYSBjbG9zdXJlCiAgICAgICAgdmFyIGV4cG9ydHMgPSB7fTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oIG5hbWUsIHZlcnNpb24gKSB7CiAgICAgICAgICAgIHZhciBlbGVtLCBpOwoKICAgICAgICAgICAgLy8gc3ltYm9scyB0aGF0IGFyZSBpZ25vcmVkIHdoZW4gY2hlY2tpbmcgZm9yCiAgICAgICAgICAgIC8vIG1vZHVsZS13cml0ZXMgdG8gdGhlIGdsb2JhbCBzY29wZQogICAgICAgICAgICB2YXIgaWdub3JlID0gewogICAgICAgICAgICAgICAgJ0VYUE9SVEVEX1NZTUJPTFMnOiB0cnVlLAogICAgICAgICAgICAgICAgJ0lHTk9SRURfU1lNQk9MUyc6IHRydWUsCiAgICAgICAgICAgICAgICAnVkVSU0lPTic6IHRydWUKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIGdsb2JhbCBzY29wZQogICAgICAgICAgICB2YXIgZ2xvYmFscyA9ICggZnVuY3Rpb24oICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgfSApKCApOwoKICAgICAgICAgICAgLy8gcXVpdCBpZiBtb2R1bGUgaXMgYWxyZWFkeSBsb2FkZWQKICAgICAgICAgICAgaWYgKCBnbG9iYWxzLmhhc093blByb3BlcnR5KCAnX19Nb2R1bGVzSW5mbycgKSAmJiBfX01vZHVsZXNJbmZvLmNoZWNrRGVwQWxyZWFkeUxvYWRlZCggbmFtZSApICkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBzaGFsbG93IGNvcHkgb2YgZ2xvYmFsIHNjb3BlLCB1c2VkIHRvIGNoZWNrIGZvciB3cml0ZXMgCiAgICAgICAgICAgIHZhciBvbGRHbG9iYWxzID0ge307CiAgICAgICAgICAgIGZvciAoIGVsZW0gaW4gZ2xvYmFscyApIHsKICAgICAgICAgICAgICAgIGlmICggZ2xvYmFscy5oYXNPd25Qcm9wZXJ0eSggZWxlbSApICkgewogICAgICAgICAgICAgICAgICAgIG9sZEdsb2JhbHNbIGVsZW0gXSA9IGdsb2JhbHNbIGVsZW0gXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gbmFtZSByZXNvbHV0aW9uIGlzIGRvbmUgaW4gdGhlIG5hdGl2ZSBmdW5jdGlvbiBgX19idWlsdGluX3VzZWAKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gRm9yIHRoZSBTcGlkZXJNb25rZXkgaW1wbGVtZW50YXRpb24sIHdlIHdhbnQgdG8gcmV0aHJvdyBwb3NzaWJsZSBleGNlcHRpb24gCiAgICAgICAgICAgIC8vIHRvIGdldCBmaWxlIG5hbWUgZXRjLiB3aXRoIGVycm9yIGFzIHRoZSBuYXRpdmUgZXJyb3IgZG9lc24ndCBpbmNsdWRlIHRoYXQuCiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBoYXZlIGEgZ29vZCB3YXkgdG8gZGV0ZXJtaW5lIG9uZSBvciB0aGUgb3RoZXIsIHRoaXMgaXMga2luZCBvZiAKICAgICAgICAgICAgLy8gaGFja2lzaDogcmVseSBvbiBQYWNrYWdlcy5qYXZhIC0gaWYgcHJlc2VudCBhbmQgb2JqZWN0LCB0aGlzIGlzIFJoaW5vL0phdmEgYmFja2VuZAogICAgICAgICAgICAvLyBJZiBub3QsIHRoaXMgaXMgc3BpZGVybW9ua2V5CiAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgbW9kdWxlIGNhbiBub3QgcmVseSBvbiBhbnkgb3RoZXIgbW9kdWxlcywgYXMgaXQgaXMKICAgICAgICAgICAgLy8gdGhlIGxvYWRlciBtb2R1bGUuLi4uIGNhcGlzaD8KICAgICAgICAgICAgaWYgKCAoIHR5cGVvZiBQYWNrYWdlcyA9PT0gIm9iamVjdCIgKSAmJiAoIHR5cGVvZiBQYWNrYWdlcy5qYXZhID09PSAib2JqZWN0IiApICkgewogICAgICAgICAgICAgICAgLy8gUmhpbm8vSmF2YSBwYXRoCiAgICAgICAgICAgICAgICBfX2J1aWx0aW5fdXNlKCBuYW1lICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBTcGlkZXJNb25rZXkvQy9DKysgcGF0aAogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBfX2J1aWx0aW5fdXNlKCBuYW1lICk7CiAgICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBtb2R1bGVzIG11c3QgaW5pdGlhbGlzZSBhbiBFWFBPUlRFRF9TWU1CT0xTIHZhcmlhYmxlLgogICAgICAgICAgICAvLyBUaGlzIGlzIGluc3BpcmVkZSBieSBtb3ppbGxhJ3MgbW9kdWxlIHN5c3RlbSwgc2VlIGFsc28KICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdF9jb2RlX21vZHVsZXMvVXNpbmcKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gdGhpcyBjb2RlIHRocm93cyBpZiB0aGUgdmFyaWFibGUgaXMgbm90IGRlZmluZWQgCiAgICAgICAgICAgIC8vIG9yIGlmIGl0IGlzIG5vdCBvZiB0aGUgcHJvcGVyIHR5cGUuCiAgICAgICAgICAgIGlmICggIWdsb2JhbHMuaGFzT3duUHJvcGVydHkoICdFWFBPUlRFRF9TWU1CT0xTJyApIHx8IHR5cGVvZiBFWFBPUlRFRF9TWU1CT0xTICE9PSAnb2JqZWN0JyB8fCBFWFBPUlRFRF9TWU1CT0xTLmNvbnN0cnVjdG9yICE9PSBBcnJheSApIHsKICAgICAgICAgICAgICAgIHRocm93ICdVc2UgZXJyb3I6IG1vZHVsZSAiJyArIG5hbWUgKyAnIiBkb2VzIG5vdCBpbml0aWFsaXNlIGFycmF5IEVYUE9SVEVEX1NZTUJPTFMuJzsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIC8vIHZlcnNpb24gb2YgdGhlIG1vZHVsZQogICAgICAgICAgICBnbG9iYWxzLlZFUlNJT04gPSBnbG9iYWxzLlZFUlNJT04gfHwgIjAuMC4wIgoKCiAgICAgICAgICAgIC8vIGlmIGB1c2UoLi4uKWAgcmVxdWlyZXMgYSBjZXJ0YWluIHZlcnNpb24sCiAgICAgICAgICAgIC8vIHRlc3QgaWYgdGhlIG1vZHVsZSBzdXBwbGllcyB0aGF0CiAgICAgICAgICAgIC8vIG9yIG90aGVyd2lzZSB0aHJvdyBhbiBlcnJvcgogICAgICAgICAgICBpZiAoIHZlcnNpb24gKSB7CiAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbmVycm9yID0gIlJlcXVlc3RpbmcgdmVyc2lvbiAiICsgdW5ldmFsKCB2ZXJzaW9uICkgKyAiIG9mIG1vZHVsZSAiICsgbmFtZSArICIgd2hpY2ggaXMgdmVyc2lvbiAiICsgdW5ldmFsKCBWRVJTSU9OICk7CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gc3BsaXR2ZXJzaW9uKCB2ICkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAoIHR5cGVvZiggdiApID09PSAic3RyaW5nIiApICYmIHYuc3BsaXQoICIuIiApLm1hcCggZnVuY3Rpb24oIHMgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoIHMsIDEwICkKICAgICAgICAgICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICAgICAgICAgIGlmICggcmVzdWx0LmNvbnN0cnVjdG9yICE9PSBBcnJheSB8fCByZXN1bHQubGVuZ3RoICE9PSAzIHx8IHJlc3VsdC5qb2luKCAiLiIgKSAhPT0gdiApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdmVyc2lvbmVycm9yOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG1vZHVsZXZlcnNpb24gPSBzcGxpdHZlcnNpb24oIFZFUlNJT04gKTsKICAgICAgICAgICAgICAgIHZlcnNpb24gPSBzcGxpdHZlcnNpb24oIHZlcnNpb24gKTsKICAgICAgICAgICAgICAgIGlmICggISggbW9kdWxldmVyc2lvblsgMCBdID09IHZlcnNpb25bIDAgXSAmJiAoIG1vZHVsZXZlcnNpb25bIDEgXSA+IHZlcnNpb25bIDEgXSB8fCAoIG1vZHVsZXZlcnNpb25bIDEgXSA9PT0gdmVyc2lvblsgMSBdICYmIG1vZHVsZXZlcnNpb25bIDIgXSA+PSB2ZXJzaW9uWyAyIF0gKSApICkgKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdmVyc2lvbmVycm9yOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIFRPRE86IHNlZW1zIGxpa2Ugd2UgZG9udCBjaGVjayB2ZXJzaW9uIG51bWJlcgogICAgICAgICAgIGlmIG1vZHVsZSBpcyBhbHJlYWR5IGxvYWRlZC4uLiAqLwogICAgICAgICAgICBfX01vZHVsZXNJbmZvLnNldFZlcnNpb24oIG5hbWUsIFZFUlNJT04gKTsKCiAgICAgICAgICAgIC8vIG1iZDogQWRkIHN5bWJvbHMgdG8gTW9kdWxlc0luZm8KICAgICAgICAgICAgX19Nb2R1bGVzSW5mby5hZGRTeW1ib2xzKCBuYW1lLCBFWFBPUlRFRF9TWU1CT0xTICk7CgogICAgICAgICAgICAvLyBtYmQ6IEkgd29uZGVyIHdoeSB0aGlzIGlzIG5lZWRlZD8KICAgICAgICAgICAgLy8gcmplOiBXaGVuIGxvYWRpbmcgYSBtb2R1bGUsIHdlIGNyZWF0ZSAob3IgY2hhbmdlKSB0aGUgZ2xvYmFsIHZhcmlhYmxlIF9fTW9kdWxlc0luZm8KICAgICAgICAgICAgLy8gcmplOiBhbmQgdGh1cyBpdCBuZWVkcyB0byBleHBvcnRlZCwgb3Igd2Ugd291bGQgZ2V0IGEgd2FybmluZyBmcm9tIHRoZSBtb2R1bGUgc3lzdGVtLiAKICAgICAgICAgICAgLy8gcmplOiBDb3VsZCBiZSBoYW5kbGVkIGFzIGEgc3BlY2lhbCBjYXNlIGluIHRoZSBjb2RlIGluc3RlYWQsIGJ1dCBJIGZpbmQgaXQgc2ltcGxlcgogICAgICAgICAgICAvLyByamU6IGp1c3QgdG8gYWRkIGl0IHRvIHRoZSBleHBvcnRlZCBzeW1ib2xzLgogICAgICAgICAgICBFWFBPUlRFRF9TWU1CT0xTLnB1c2goICdfX01vZHVsZXNJbmZvJyApOwoKICAgICAgICAgICAgLy8gYXBwZW5kIGBJR05PUkVEX1NZTUJPTFNgIHRvIGBpZ25vcmVgIGxpc3QKICAgICAgICAgICAgaWYgKCBnbG9iYWxzLmhhc093blByb3BlcnR5KCAnSUdOT1JFRF9TWU1CT0xTJyApICkgewogICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBJR05PUkVEX1NZTUJPTFMubGVuZ3RoOyArK2kgKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IElHTk9SRURfU1lNQk9MU1sgaSBdOwogICAgICAgICAgICAgICAgICAgIGlnbm9yZVsgZWxlbSBdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gd2FybiBpZiBgRVhQT1JURURfU1lNQk9MU2AgaXMgbm90IGV4cG9ydGVkCiAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgRVhQT1JURURfU1lNQk9MUy5sZW5ndGg7ICsraSApIHsKICAgICAgICAgICAgICAgIGVsZW0gPSBFWFBPUlRFRF9TWU1CT0xTWyBpIF07CiAgICAgICAgICAgICAgICBpZiAoIGdsb2JhbHMuaGFzT3duUHJvcGVydHkoICdwcmludCcgKSAmJiAhZ2xvYmFscy5oYXNPd25Qcm9wZXJ0eSggZWxlbSApICkgewogICAgICAgICAgICAgICAgICAgIHByaW50KCAnV2FybmluZzogbW9kdWxlICInICsgbmFtZSArICciIHNheXMgaXQgZXhwb3J0cyBnbG9iYWwgIicgKyBlbGVtICsgJyIgd2hpY2ggZG9lcyBub3QgZXhpc3RcbicgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGV4cG9ydHNbIGVsZW0gXSA9IGdsb2JhbHNbIGVsZW0gXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gd2FybiBpZiBtb2R1bGUgY3JlYXRlcyBvciBjaGFuZ2VzIGdsb2JhbCBzeW1ib2wKICAgICAgICAgICAgLy8gd2hpY2ggaXMgbm90IGluIGBJR05PUkVEX1NZTUJPTFNgIG9yIGBFWFBPUlRFRF9TWU1CT0xTYAogICAgICAgICAgICAvLyBhbmQgZGVsZXRlIHRoZW0gaWYgY3JlYXRlZAogICAgICAgICAgICBmb3IgKCBlbGVtIGluIGdsb2JhbHMgKSB7CiAgICAgICAgICAgICAgICBpZiAoIGdsb2JhbHMuaGFzT3duUHJvcGVydHkoIGVsZW0gKSApIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCBvbGRHbG9iYWxzLmhhc093blByb3BlcnR5KCBlbGVtICkgJiYgb2xkR2xvYmFsc1sgZWxlbSBdICE9PSBnbG9iYWxzWyBlbGVtIF0gKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2xvYmFscy5oYXNPd25Qcm9wZXJ0eSggJ3ByaW50JyApICYmICFpZ25vcmVbIGVsZW0gXSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCAnV2FybmluZzogbW9kdWxlICInICsgbmFtZSArICciIG92ZXJ3cml0ZXMgZ2xvYmFsIHZhcmlhYmxlICcgKyBlbGVtICsgJ1xuJyApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoICFleHBvcnRzLmhhc093blByb3BlcnR5KCBlbGVtICkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb2xkR2xvYmFscy5oYXNPd25Qcm9wZXJ0eSggZWxlbSApICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsc1sgZWxlbSBdID0gb2xkR2xvYmFsc1sgZWxlbSBdOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBnbG9iYWxzLmhhc093blByb3BlcnR5KCAncHJpbnQnICkgJiYgIWlnbm9yZVsgZWxlbSBdICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoICdXYXJuaW5nOiBtb2R1bGUgIicgKyBuYW1lICsgJyIgY3JlYXRlcyBub24tZXhwb3J0ZWQgZ2xvYmFsIHZhcmlhYmxlICcgKyBlbGVtICsgJ1xuJyApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhZGVsZXRlIGdsb2JhbHNbIGVsZW0gXSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxzWyBlbGVtIF0gPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9ICkoICk7Cg==","moduleName":"Use"}
